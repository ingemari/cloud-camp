#  Cloud Camp

HTTP-balancer ะฝะฐ Go ั rate-limiter.

---

## ๐ฆ ะะพะทะผะพะถะฝะพััะธ

- ๐ ะัะธัะผ HTTP-ะทะฐะฟัะพัะพะฒ ะธ ัะฐัะฟัะตะดะตะปะตะฝะธะต ะฟะพ ะฑัะบะตะฝะดะฐะผ (round-robin)
- ๐ ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ ะฝะตะดะพัััะฟะฝะพััะธ ัะตัะฒะตัะพะฒ
- ๐ ะะฐัะฐะปะปะตะปัะฝะฐั ะพะฑัะฐะฑะพัะบะฐ ะทะฐะฟัะพัะพะฒ (gะพัััะธะฝั)
- ๐ ะะพััะตะบัะฝะพะต ะทะฐะฒะตััะตะฝะธะต ัะฐะฑะพัั ัะตัะตะท SIGINT/SIGTERM (`graceful shutdown`)
- ๐ ะะฐะณััะทะพัะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต ัะตัะตะท k6
- ๐ ะะพะณะธัะพะฒะฐะฝะธะต ัะพะฑััะธะน ะธ ะพัะธะฑะพะบ (`log/slog`)
- ๐ ะะณัะฐะฝะธัะตะฝะธะต ะทะฐะฟัะพัะพะฒ ะฟัะธ ะฟะพะผะพัะธ ะฐะปะณะพัะธัะผะฐ token-bucket
- ๐ ะะพะปััะตะฝะธะต ะพะบััะถะตะฝะธั ะธะท ะบะพะฝัะธะณะฐ (ะะตะทะฐะฒะธัะธั ะพั ะบะพะดะฐ)
- ๐ ะะพะดะดะตัะถะบะฐ ััะฐะฝะตะฝะธั ะปะธะผะธัะพะฒ ะฟะพะปัะทะพะฒะฐัะตะปะตะน (`redis db`)
- ๐ ะะตะฐะปะธะทะพะฒะฐะฝ CRUD ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะบะปะธะตะฝัะฐะผะธ ะธ ัะพะทะดะฐะฝะธั ัะฝะธะบะฐะปัะฝัั ะปะธะผะธัะพะฒ

---

## ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
cloud/
โโโ Makefile
โโโ README.md
โโโ cloud-camp.postman_collection.json      # Postman ะบะพะปะปะตะบัะธั ัะพ ััะพัะผะธัะพะฒะฐะฝะฝัะผะธ ะทะฐะฟัะพัะฐะผะธ
โโโ cmd                                     # ะขะพัะบะฐ ะฒัะพะดะฐ ะฒ ะฟัะธะปะพะถะตะฝะธะต
โโโ config.json                             # ะะพะฝัะธะณััะฐัะธั ะฟัะธะปะพะถะตะฝะธั (ะฟะพัั + ัะฟะธัะพะบ ะฑัะบะตะฝะดะพะฒ)
โโโ go.mod
โโโ go.sum
โโโ internal
โ โโโ balancer                              # ะะปะณะพัะธัะผั ะฑะฐะปะฐะฝัะธัะพะฒะบะธ ะฝะฐะณััะทะบะธ (round-robin)
โ โโโ config                                # ะะฐะณััะทะบะฐ ะธ ะพะฑัะฐะฑะพัะบะฐ ะบะพะฝัะธะณััะฐัะธะพะฝะฝัั ัะฐะนะปะพะฒ
โ โโโ graceful                              # ะะพััะตะบัะฝะฐั ะพััะฐะฝะพะฒะบะฐ ัะตัะฒะตัะฐ ะฟะพ ัะธะณะฝะฐะปะฐะผ ะะก
โ โโโ handler                               # ะะตะฐะปะธะทะฐัะธั ัะปะพั ัะตะฝะดะปะตั/dto/ะผะฐะฟะฟะตัั
โ โโโ model                                 # ะัะฝะพะฒะฝัะต ะพะฑัะตะบัั 
โ โโโ logs                                  # ะะฐัััะพะนะบะฐ ะปะพะณะธัะพะฒะฐะฝะธั (slog)
โ โโโ proxy                                 # ะะตะฐะปะธะทะฐัะธั reverse proxy ะดะปั ะฟะตัะตััะปะบะธ ะทะฐะฟัะพัะพะฒ
โ โโโ ratelimit                             # ะะณัะฐะฝะธัะตะฝะธะต ัะฐััะพัั ะทะฐะฟัะพัะพะฒ (Token Bucket)
โ โโโ repository                            # ะกะปะพะน ะดะปั ัะฐะฑะพัั ั ะฑะด
โ โโโ service                               # ะกะปะพะน ะฑะธะทะฝะตั ะปะพะณะธะบะธ
โ โโโ storage                               # ะะพะดะบะปััะตะฝะธะต ะบ redis
โ โโโ server                                # ะะพะณะธะบะฐ ะทะฐะฟััะบะฐ ัะตัะฒะตัะพะฒ
โโโ logs                                    # ะะฐะฟะบะฐ ะดะปั ััะฐะฝะตะฝะธั ัะฐะนะปะพะฒ ะปะพะณะพะฒ
โโโ tests   
    โโโ k6                                  # ะะฐะณััะทะพัะฝัะต ัะตััั ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ k6
```

##  ะะฐะฟััะบ ะฟัะธะปะพะถะตะฝะธั

ะัะต ะบะพะผะฐะฝะดั ะดะปั ัะดะพะฑััะฒะฐ ะดะพะฑะฐะฒะปะตะฝะฝั ะฒ ะผะตะน ัะฐะนะป

`make build` && `./main`
ะธะปะธ\
`make run`

## ๐งช ะะฐะณััะทะพัะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต (k6)

ะกะบัะธะฟั tests/k6/test_k6.js ะฟะพะทะฒะพะปัะตั ะฟัะพะฒะตััะธ ะฝะฐะณััะทะพัะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต:

`make k6`

ะัะธะผะตั ะฝะฐะณััะทะบะธ:
    1000 ะฒะธัััะฐะปัะฝัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
    5000 ะธัะตัะฐัะธะน
ะฆะตะปั: ะฟัะพะฒะตัะธัั ัััะพะนัะธะฒะพััั ะฑะฐะปะฐะฝัะธัะพะฒัะธะบะฐ
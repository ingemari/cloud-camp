#  Cloud Camp

HTTP-balancer на Go с rate-limiter.

---

## 📦 Возможности

- 📌 Приём HTTP-запросов и распределение по бэкендам (round-robin)
- 📌 Обработка ошибок недоступности серверов
- 📌 Параллельная обработка запросов (gорутины)
- 📌 Корректное завершение работы через SIGINT/SIGTERM (`graceful shutdown`)
- 📌 Нагрузочное тестирование через k6
- 📌 Логирование событий и ошибок (`log/slog`)
- 📌 Ограничение запросов при помощи алгоритма token-bucket
- 📌 Получение окружения из конфига (Независит от кода)
- 📌 Поддержка хранения лимитов пользователей (`redis db`)
- 📌 Реализован CRUD для управления клиентами и создания уникальных лимитов

---

## 🗂 Структура проекта

```
cloud/
├── Makefile
├── README.md
├── cloud-camp.postman_collection.json      # Postman коллекция со сформированными запросами
├── cmd                                     # Точка входа в приложение
├── config.json                             # Конфигурация приложения (порт + список бэкендов)
├── go.mod
├── go.sum
├── internal
│ ├── balancer                              # Алгоритмы балансировки нагрузки (round-robin)
│ ├── config                                # Загрузка и обработка конфигурационных файлов
│ ├── graceful                              # Корректная остановка сервера по сигналам ОС
│ ├── handler                               # Реализация слоя хендлер/dto/мапперы
│ ├── model                                 # Основные объекты 
│ ├── logs                                  # Настройка логирования (slog)
│ ├── proxy                                 # Реализация reverse proxy для пересылки запросов
│ ├── ratelimit                             # Ограничение частоты запросов (Token Bucket)
│ ├── repository                            # Слой для работы с бд
│ ├── service                               # Слой бизнес логики
│ ├── storage                               # Подключение к redis
│ └── server                                # Логика запуска серверов
├── logs                                    # Папка для хранения файлов логов
└── tests   
    └── k6                                  # Нагрузочные тесты с использованием k6
```

##  Запуск приложения

Все команды для удобства добавленны в мей файл

`make build` && `./main`
или\
`make run`

## 🧪 Нагрузочное тестирование (k6)

Скрипт tests/k6/test_k6.js позволяет провести нагрузочное тестирование:

`make k6`

Пример нагрузки:
    1000 виртуальных пользователей
    5000 итераций
Цель: проверить устойчивость балансировщика